<!doctype html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Best√§ll ett skr√§ddarsytt konstverk. Portr√§tt, djurmotiv eller n√•got helt unikt ‚Äì skapat speciellt f√∂r dig."
    />
    <title>Best√§llning | Fine Line galleri</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="icon" type="image/svg+xml" href="images/favicon.svg" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
      <div class="nav-container">
        <a href="index.html" class="logo">
          <span class="logo-text">Fine Line</span>
          <span class="logo-sub">galleri</span>
        </a>
        <button class="nav-toggle" id="navToggle" aria-label="√ñppna meny">
          <span class="hamburger"></span>
        </button>
        <ul class="nav-menu" id="navMenu">
          <li><a href="index.html" class="nav-link">Hem</a></li>
          <li><a href="galleri.html" class="nav-link">Galleri</a></li>
          <li><a href="om-oss.html" class="nav-link">Om konstn√§ren</a></li>
          <li>
            <a href="bestallning.html" class="nav-link active">Best√§llning</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
      <div class="container">
        <h1>Best√§ll ditt verk</h1>
        <p>L√•t mig skapa n√•got unikt f√∂r dig</p>
      </div>
    </header>

    <section class="commission-section">
      <div class="container">
        <!-- Process Steps -->
        <div class="section-header centered">
          <span class="section-tag">S√• fungerar det</span>
          <h2 class="section-title">Best√§llningsprocessen</h2>
        </div>
        <div class="process-steps">
          <div class="process-step">
            <div class="step-number">01</div>
            <h3>Best√§llning</h3>
            <p>
              Du kontaktar mig med detaljer om vilken ras, om du har n√•gra
              √∂nskef√§rger eller k√§nslor att representera
            </p>
          </div>
          <div class="process-line"></div>
          <div class="process-step">
            <div class="step-number">02</div>
            <h3>Respons</h3>
            <p>
              Inom kort s√• h√∂r jag av mig ifall √∂nskem√•len g√•r att uppfylla, och
              meddelar att jag p√•b√∂rjar konstverket
            </p>
          </div>
          <div class="process-line"></div>
          <div class="process-step">
            <div class="step-number">03</div>
            <h3>Skapande</h3>
            <p>
              Med omsorg och precision f√∂ds ditt unika konstverk till liv, jag
              siktar p√• att vara klar inom 2 dagar fr√•n p√•b√∂rjat verk
            </p>
          </div>
          <div class="process-line"></div>
          <div class="process-step">
            <div class="step-number">04</div>
            <h3>Betalning & Leverans</h3>
            <p>
              Ditt verk levereras varsamt f√∂rpackat, tillsammans med
              instruktioner f√∂r betalning
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Form Section -->
    <section class="contact-section" id="kontaktformular">
      <div class="container">
        <div class="contact-grid">
          <div class="contact-info">
            <span class="section-tag">Kontakt</span>
            <h2>L√•t oss prata</h2>
            <p>
              Har du fr√•gor eller vill diskutera ditt projekt? Fyll i formul√§ret
              s√• √•terkommer jag s√• snart som m√∂jligt. Du kan ocks√• n√• mig direkt
              via e-post eller telefon.
            </p>

            <div class="contact-details">
              <div class="contact-item">
                <div class="contact-icon">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                    ></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                  </svg>
                </div>
                <div class="contact-item-text">
                  <h4>E-post</h4>
                  <p>
                    <a href="mailto:hej@finelinegalleri.se"
                      >hej@finelinegalleri.se</a
                    >
                  </p>
                </div>
              </div>
              <div class="contact-item">
                <div class="contact-icon">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect
                      x="2"
                      y="3"
                      width="20"
                      height="14"
                      rx="2"
                      ry="2"
                    ></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                  </svg>
                </div>
                <div class="contact-item-text">
                  <h4>Instagram</h4>
                  <p><a href="#">@finelinegalleri</a></p>
                </div>
              </div>
              <div class="contact-item">
                <div class="contact-icon">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                </div>
                <div class="contact-item-text">
                  <h4>Svarstid</h4>
                  <p>Vanligtvis inom 24-48 timmar</p>
                </div>
              </div>
            </div>
          </div>

          <form class="contact-form" id="commissionForm">
            <div class="form-group">
              <label for="produkt">Produkt</label>
              <input
                type="text"
                id="produkt"
                name="produkt"
                readonly
                tabindex="-1"
                placeholder="‚Äì"
              />
            </div>
            <div class="form-group">
              <label for="size">Storlek</label>
              <input
                type="text"
                id="size"
                name="size"
                readonly
                tabindex="-1"
                placeholder="‚Äì"
              />
            </div>
            <!-- Color pickers for background inspiration -->
            <div class="form-group">
              <div class="color-picker-row">
                <div class="color-picker-group">
                  <label for="bgColor1" class="color-picker-label"
                    >F√§rg 1</label
                  >
                  <div class="color-picker-wrapper">
                    <input
                      type="color"
                      id="bgColor1"
                      name="bgColor1"
                      value="#a3a3a3"
                    />
                    <input
                      type="text"
                      id="bgColor1Text"
                      class="color-text-input"
                      value="#a3a3a3"
                      placeholder="#a3a3a3"
                    />
                    <button
                      type="button"
                      class="color-clear-btn"
                      data-target="bgColor1"
                      title="Rensa f√§rg"
                    >
                      √ó
                    </button>
                  </div>
                </div>
                <div class="color-picker-group">
                  <label for="bgColor2" class="color-picker-label"
                    >F√§rg 2</label
                  >
                  <div class="color-picker-wrapper">
                    <input
                      type="color"
                      id="bgColor2"
                      name="bgColor2"
                      value="#a5a5a5"
                    />
                    <input
                      type="text"
                      id="bgColor2Text"
                      class="color-text-input"
                      value="#a5a5a5"
                      placeholder="#a5a5a5"
                    />
                    <button
                      type="button"
                      class="color-clear-btn"
                      data-target="bgColor2"
                      title="Rensa f√§rg"
                    >
                      √ó
                    </button>
                  </div>
                </div>
              </div>
              <p class="form-help" style="margin-bottom: var(--space-sm)">
                V√§lj upp till tv√• f√§rger som inspiration f√∂r bakgrunden. Du kan
                ocks√• beskriva f√§rgerna i meddelandet nedan.
              </p>
            </div>
            <hr class="form-divider" />
            <div class="form-group">
              <label for="email">E-post *</label>
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder="din@epost.se"
              />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">F√∂rnamn *</label>
                <input
                  type="text"
                  id="firstName"
                  name="firstName"
                  required
                  placeholder="Ditt f√∂rnamn"
                />
              </div>
              <div class="form-group">
                <label for="lastName">Efternamn *</label>
                <input
                  type="text"
                  id="lastName"
                  name="lastName"
                  required
                  placeholder="Ditt efternamn"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="street">Gatuadress *</label>
              <input
                type="text"
                id="street"
                name="street"
                required
                placeholder="Gatan 123"
              />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="postalCode">Postnummer *</label>
                <input
                  type="text"
                  id="postalCode"
                  name="postalCode"
                  required
                  placeholder="123 45"
                />
              </div>
              <div class="form-group">
                <label for="city">Stad *</label>
                <input
                  type="text"
                  id="city"
                  name="city"
                  required
                  placeholder="Stockholm"
                />
              </div>
            </div>

            <div class="form-group">
              <label for="message">Extra meddelande (valfritt)</label>
              <textarea
                id="message"
                name="message"
                rows="4"
                placeholder="Finns det n√•got speciellt du vill att vi ska veta om din best√§llning? Du kan √§ven beskriva √∂nskade f√§rger h√§r."
              ></textarea>
            </div>
            <div
              id="formStatus"
              class="form-status"
              style="display: none"
            ></div>
            <button
              type="submit"
              class="btn btn-primary"
              id="submitBtn"
              style="width: 100%"
            >
              Skicka best√§llning
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="section">
      <div class="container">
        <div class="section-header centered">
          <span class="section-tag">FAQ</span>
          <h2>Vanliga fr√•gor</h2>
        </div>
        <div class="story-content">
          <h4>Hur l√•ng tid tar det att f√• mitt best√§llda verk?</h4>
          <p>
            Normalt tar det 2-4 veckor beroende p√• storlek och komplexitet. Vid
            st√∂rre best√§llningar eller h√∂gs√§song kan det ta lite l√§ngre. Du f√•r
            alltid en tidsuppskattning i din offert.
          </p>

          <h4>Kan jag se en skiss innan det slutgiltiga verket skapas?</h4>
          <p>
            Ja! F√∂r medium- och stora format ing√•r alltid en digital skiss f√∂r
            godk√§nnande. F√∂r mindre format kan detta l√§ggas till mot en
            till√§ggskostnad.
          </p>

          <h4>Vad h√§nder om jag inte √§r n√∂jd med resultatet?</h4>
          <p>
            Din tillfredsst√§llelse √§r viktig f√∂r mig. Om det slutgiltiga verket
            avviker v√§sentligt fr√•n den godk√§nda skissen, arbetar vi tillsammans
            f√∂r att hitta en l√∂sning.
          </p>

          <h4>S√§ljer ni √§ven tryck av era verk?</h4>
          <p>
            Ja, utvalda verk finns tillg√§ngliga som h√∂gkvalitativa tryck. Bes√∂k
            v√•rt <a href="galleri.html">galleri</a> f√∂r att se tillg√§ngliga
            alternativ.
          </p>

          <h4>Hur skickas verken?</h4>
          <p>
            Alla verk skickas varsamt f√∂rpackade med f√∂rs√§krad frakt inom
            Sverige. Internationell frakt kan ordnas p√• beg√§ran.
          </p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-grid">
          <div class="footer-brand">
            <a href="index.html" class="logo">
              <span class="logo-text">Fine Line</span>
              <span class="logo-sub">galleri</span>
            </a>
            <p>Unik konst med en linje ‚Äì skapad med passion och precision.</p>
          </div>
          <div class="footer-links">
            <h4>Navigering</h4>
            <ul>
              <li><a href="index.html">Hem</a></li>
              <li><a href="galleri.html">Galleri</a></li>
              <li><a href="om-oss.html">Om konstn√§ren</a></li>
              <li><a href="bestallning.html">Best√§llning</a></li>
            </ul>
          </div>
          <div class="footer-links">
            <h4>Information</h4>
            <ul>
              <li><a href="villkor.html">K√∂pvillkor</a></li>
              <li><a href="frakt.html">Frakt & leverans</a></li>
              <li><a href="integritet.html">Integritetspolicy</a></li>
            </ul>
          </div>
          <div class="footer-contact">
            <h4>Kontakt</h4>
            <p>
              <a href="mailto:hej@finelinegalleri.se">hej@finelinegalleri.se</a>
            </p>
            <div class="social-links">
              <a href="#" aria-label="Instagram" class="social-link">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                  />
                </svg>
              </a>
              <a href="#" aria-label="Facebook" class="social-link">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  />
                </svg>
              </a>
              <a href="#" aria-label="Pinterest" class="social-link">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2026 Fine Line galleri. Alla r√§ttigheter f√∂rbeh√•llna.</p>
        </div>
      </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
      // Prefill form from URL parameters (from product page)
      document.addEventListener("DOMContentLoaded", () => {
        const urlParams = new URLSearchParams(window.location.search);

        // Prefill product (name + variant)
        const produkt = urlParams.get("produkt") || "";
        const variant = urlParams.get("variant") || "";
        const produktField = document.getElementById("produkt");
        if (produktField) {
          produktField.value = variant ? `${produkt} ‚Äì ${variant}` : produkt;
        }

        // Prefill size
        const storlek = urlParams.get("storlek") || "";
        const sizeField = document.getElementById("size");
        if (sizeField) {
          sizeField.value = storlek;
        }

        // Setup color pickers sync
        setupColorPickers();
      });

      // Color picker functionality
      function setupColorPickers() {
        // Sync color picker with text input for both colors
        ["bgColor1", "bgColor2"].forEach((id) => {
          const colorInput = document.getElementById(id);
          const textInput = document.getElementById(id + "Text");
          const clearBtn = document.querySelector(
            `.color-clear-btn[data-target="${id}"]`,
          );

          if (colorInput && textInput) {
            // Sync color to text
            colorInput.addEventListener("input", () => {
              textInput.value = colorInput.value.toUpperCase();
            });

            // Sync text to color
            textInput.addEventListener("input", () => {
              const value = textInput.value;
              if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                colorInput.value = value;
              }
            });

            textInput.addEventListener("blur", () => {
              // Validate and fix format on blur
              let value = textInput.value.trim();
              if (!value.startsWith("#")) {
                value = "#" + value;
              }
              if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                textInput.value = value.toUpperCase();
                colorInput.value = value;
              } else {
                textInput.value = colorInput.value.toUpperCase();
              }
            });
          }

          // Clear button
          if (clearBtn) {
            clearBtn.addEventListener("click", () => {
              const defaultColor = id === "bgColor1" ? "#A3A3A3" : "#A5A5A5";
              colorInput.value = defaultColor;
              textInput.value = defaultColor;
            });
          }
        });
      }

      // Handle form submission with Slack webhook
      document
        .getElementById("commissionForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const submitBtn = document.getElementById("submitBtn");
          const formStatus = document.getElementById("formStatus");
          const form = e.target;

          // Disable button and show loading
          submitBtn.disabled = true;
          submitBtn.textContent = "Skickar...";
          formStatus.style.display = "none";

          // Gather form data
          const formData = {
            firstName: document.getElementById("firstName").value,
            lastName: document.getElementById("lastName").value,
            produkt: document.getElementById("produkt").value,
            size: document.getElementById("size").value,
            email: document.getElementById("email").value,
            street: document.getElementById("street").value,
            postalCode: document.getElementById("postalCode").value,
            city: document.getElementById("city").value,
            bgColor1: document.getElementById("bgColor1").value,
            bgColor2: document.getElementById("bgColor2").value,
            message:
              document.getElementById("message").value ||
              "Inget extra meddelande",
          };

          // Get URL params for additional context
          const urlParams = new URLSearchParams(window.location.search);
          const produktNamn = urlParams.get("produkt") || "Ej specificerad";
          const produktId = urlParams.get("produktId") || "";

          // Build Slack message
          const slackMessage = {
            text: `üé® Ny best√§llning fr√•n Fine Line galleri!`,
            blocks: [
              {
                type: "header",
                text: {
                  type: "plain_text",
                  text: "üé® Ny best√§llning!",
                  emoji: true,
                },
              },
              {
                type: "section",
                fields: [
                  {
                    type: "mrkdwn",
                    text: `*Produkt:*\n${formData.produkt || produktNamn}`,
                  },
                  {
                    type: "mrkdwn",
                    text: `*Storlek:*\n${formData.size}`,
                  },
                  {
                    type: "mrkdwn",
                    text: `*Bakgrundsf√§rger:*\n${formData.bgColor1} | ${formData.bgColor2}`,
                  },
                ],
              },
              {
                type: "section",
                fields: [
                  {
                    type: "mrkdwn",
                    text: `*Leveransadress:*\n${formData.firstName} ${formData.lastName}\n${formData.street}\n${formData.postalCode} ${formData.city}`,
                  },
                  {
                    type: "mrkdwn",
                    text: `*E-post:*\n${formData.email}`,
                  },
                ],
              },
              {
                type: "section",
                text: {
                  type: "mrkdwn",
                  text: `*Extra meddelande:*\n${formData.message}`,
                },
              },
              {
                type: "context",
                elements: [
                  {
                    type: "mrkdwn",
                    text: `Produkt-ID: ${produktId || "N/A"} | Skickad: ${new Date().toLocaleString("sv-SE")}`,
                  },
                ],
              },
            ],
          };

          try {
            // Send to Slack webhook (assembled from parts for basic obfuscation)
            // The actual values are injected during build from GitHub secrets
            const _h = [
              "aHR0cHM6Ly9ob29rcy5zbGFjay5jb20vc2VydmljZXMv",
              "%%SLACK_PART_A%%",
              "%%SLACK_PART_B%%",
              "%%SLACK_PART_C%%",
            ];
            const _d = (s) => atob(s);
            const _w = _d(_h[0]) + _h.slice(1).join("/");

            const response = await fetch(_w, {
              method: "POST",
              body: JSON.stringify(slackMessage),
              headers: {
                "Content-Type": "application/json",
              },
              mode: "no-cors", // Slack webhooks don't support CORS
            });

            // Since mode is no-cors, we can't read the response
            // Show success message
            formStatus.className = "form-status success";
            formStatus.innerHTML = `
                    <strong>Tack f√∂r din best√§llning!</strong><br>
                    Jag har tagit emot din f√∂rfr√•gan och √•terkommer s√• snart som m√∂jligt via e-post till ${formData.email}.
                `;
            formStatus.style.display = "block";
            form.reset();

            // Scroll to status message
            formStatus.scrollIntoView({ behavior: "smooth", block: "center" });
          } catch (error) {
            console.error("Error sending to Slack:", error);
            formStatus.className = "form-status error";
            formStatus.innerHTML = `
                    <strong>N√•got gick fel!</strong><br>
                    Kunde inte skicka din best√§llning. V√§nligen f√∂rs√∂k igen eller kontakta mig p√•
                    <a href="mailto:hej@finelinegalleri.se">hej@finelinegalleri.se</a>
                `;
            formStatus.style.display = "block";
          } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = "Skicka best√§llning";
          }
        });
    </script>
  </body>
</html>
